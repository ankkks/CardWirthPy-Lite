                 CardWirth Py Lite
                  Ver 3.0RC(04)
                  フォーク制作者：暗黒騎士<ankkksあっとoutlook.jp>
                  wiki：https://www65.atwiki.jp/pylite/
                  開発：https://bitbucket.org/akkw/cardwirthpy-lite/
                  動作確認環境：Windows 7/10 64bit
---------------------------------------------------------------------------

これは：CardWirthPy / Rebootからのさらなるフォーク(派生版)です。
PyRebootとの方向性の違いにより分岐(2016/11/21版)、以降Rebootの更新を選択的に取り込みつつ独自の変更を含みます。

PyLiteの目標

「CardWirth再現性の向上」
　　　スキン以外の外観/挙動を、バグも含めCardWirth1.28/1.50に可能な限り近づける。
「ゆとり化(ライト化)」
　　　フォルダ・ファイル構成・オリジナル文言をシンプル・軽量化し、面倒な手順を減らしてすぐ遊べるようにする。
「より多くのシナリオ」
　　　対応シナリオ(規格)を最大限増やす。現状はマイナー仕様・バグ利用シナリオのみ。

--------------------------------------------------------------------------

●PyLiteの更新情報

Ver3.0RC
19.03.23 不正値11以上のボーナス・ペナルティの背景カラーを白に変更(CW準拠)
19.03.21 負荷が高いとスクリーンショット音が2回再生される場合がある(Reboot3.0)
19.03.20 Rebootに合わせてData/fontフォルダを撤去(2MBの削減/MSフォントが無い場合は起動に必要)
19.03.10 スキン文言"delete_adventurer_description"を01.09の変更に伴い変更
19.02.24 シナリオ内イメージをメッセージの特殊文字として折返し前後で表示すると表示位置が狂う(Reboot3.3)
19.02.16 WirthBuilderの格納で破損した不正なBMPへの対応強化(Reboot3.3)
19.02.16 ファイルをメイン画面へ多重ドロップできるタイミングがあった(Reboot3.3)
19.02.12 エラーのあるイメージを修復して読み込んだ時、スケール情報が欠ける場合がある(Reboot3.3)
19.01.27 背景非継承でレイヤ0以外の背景セルを削除した後、次の背景更新時に当該セルが復活する(Reboot3.2)
19.01.27 CWXEditorのResourceアイコンを使う場合のファイル名指定ミス・抜け(Reboot3.2)
19.01.22 WSN3までの背景再構築コンテントでは状態変数のみ更新が行われる(Reboot3.2仕様に同期)
19.01.13 直値1～11ダメージモーションの結果が必ず-1されていた(CW準拠)
19.01.11 年代が子供(spendEP=0)であってもアルバムにいれば親に指定できていたのを修正(CW準拠)
19.01.11 アルバム内のPCのEP消費量が一律10になっていた。spendEP/2に変更(CW準拠)
19.01.11 冒険者登録の血縁PC名・EPのフォントをパネルタイトル1に変更(CW準拠)
19.01.10 冒険者登録の血縁指定時、アルバム内のキャラ名の場合は青字で表示する(CW準拠)
19.01.09 宿帳から「削除」したPCがレベル3以上の時、アルバムに移動されていた(PyRebootの独自仕様)のを削除するように変更
19.01.08 全滅/対象消去/老衰により死亡したPCであることを示す「＿死亡」が配布されていなかった(CW準拠)
19.01.07 デバグ宿の簡易登録で作成したPCであることを示す「＠デバグ」が配布されていなかった(CW準拠)
19.01.04 同行キャストを連れ込んだ時に付与される「＠本来の上限」の得点決定ルールを変更(CW準拠)
19.01.04 同行キャストを連れ込んだ直後には「＠レベル上限」を配布しない(CW準拠)
19.01.04 キャラクター情報ダイアログにmaxが表示されるレベル条件を変更(CW準拠)
19.01.03 「：レベル補正中」の実装漏れ(Reboot3.2)
19.01.03 一度表示したテキストセルは変数が変動しても画面再構築コンテントで更新しない(Reboot3.2/CW1.50準拠)
19.01.02 JPTXの`fonttransparent`に0以外の値が指定された時に文字が描画されなくなる(Reboot3.2)
19.01.02 エリアに設定されたJPYアニメを実行中にF9すると表示が乱れる(Reboot3.2)
19.01.01 チェックアイコンの微修正
18.12.17 経験点の内部上限を21億まで拡張(CW準拠)
18.12.16 「沈黙時使用不可」の召喚獣の挙動をCWに準拠(Reboot3.1)
18.12.05 規格外サイズのキャストカード画像を指定した時、中央寄せにするオプションを追加(Reboot)
18.12.01 メンバの対象消去が生じた直後に宿帳からキャラを加入させると表示位置が狂う(Reboot)
18.12.01 特定条件でキャラ情報ダイアログを開くと表示が乱れる(Reboot)
18.11.12 bassmidi.dllの更新
18.11.11 戦闘中にアイテムカードが手札に配られた時の手札状況をCWに準拠(Reboot)
18.11.11 RC期間に移行

Ver2.3b
18.10.19 トレード・解散・ゲームオーバー中はデバッグモード切替(Ctrl+D)とスキン変更を禁止
18.10.13 PCセルを表示直後にシナリオ終了した場合、キャッシュが残っていた(Reboot)
18.10.13 冒険の中断・シナリオ終了等でシナリオから背景継承が発生していた(Reboot)
18.09.20 同行キャストの所有カードダイアログを開くとトレードエリアに移行していた(Reboot)
18.09.18 荷物袋のカードを選択カードにし、メッセージで表示させるとフリーズ(Reboot)
18.09.16 キャラクター情報ダイアログの幅が2ピクセル小さかったのを修正(CW準拠)
18.09.15 オープニング画面で終了確認ダイアログを表示するようにした(CW準拠)
18.09.10 WSN3カード再配置コンテントが機能していなかったのを修正
18.09.08 ステータスバーに画面拡大ボタンを追加(1.50準拠/デフォルト有効オプション)
18.09.07 トレード・解散エリアではスキンを変更できなくした
18.09.06 荷物袋から直接使用で付帯能力を使用できない(取り込み漏れ)
18.09.05 現時点までのWSN3の機能にフル対応しβに移行 


(Reboot)2018.03以降、開発環境に違いが生じたためRebootから移植した分を記載しています。

古いログ
https://www65.atwiki.jp/pylite/pages/4.html

--------------------------------------------------------------------------

●インストール/アンインストール
「CardWirthPyLite.exe」を起動して下さい。
Windowsのセキュリティ設定に引っかかる場合、右クリック→プロパティ→ブロックの解除。
アンインストールは、CWと同じくレジストリを使用しないのでフォルダごと削除でOKです。

・シナリオを沢山入れて重い場合
　　　　　設定＞シナリオ＞シナリオタイプ＞データベース構築を推奨。

・gdiplus.dllがない場合
　　　　　https://www7.atwiki.jp/nico_player/pages/16.html

・[スキンの自動生成ダイアログ]が出た場合
　　　　　スキンが入っていません。
　　　　「基本>本体」右のボタンからご使用のCardwirth1.20~1.50のエンジンexeを選択するか
　　　　　Data\Skinに直接スキンを入れてください。

・アップデート方法
　　　　　ファイルを全て上書きして下さい。
　　　　　機能追加がある場合、exeだけの更新だとエラーになることがあります。

・遊び方
　　　　　https://www65.atwiki.jp/pylite/pages/6.html


●互換性

[宿/スキン]
　PyRebootと同じくCardWirth 1.28-1.50の宿は変換・逆変換が可能です。
　宿/スキンデータの構造上はPyRebootと互換を損なうような変更(※)はしていないので、
　Py(1.1-2.3)の宿やスキンはそのままフォルダをコピーしてもほぼ問題なく動くと思います。
　動かなかったら教えて下さい。

　なにか問題が起こった場合は、一度Py→1.50→PyLiteというような変換を経れば大丈夫だと思います。
　(Py専用の諸々は初期化されますが)

[シナリオ]
　CW1.20～1.50仕様/WSN0～2(※)に対応します。NEXTシナリオは貼り紙に表示されません。
　バグやマイナー仕様の再現によって、対応シナリオが僅かに多い(確認している範囲で8本)点以外はPyと一緒です。
　
　※KC所持分岐についてはWSN形式でも1.50と同等の挙動をする点だけご注意ください。
　([アイテム]だけにチェックが付いている状態でも戦闘手札が検索されます)

●その他

レベルが上がらない
　PyLiteではデバッグモード(右下に鉛筆ボタンが表示)だと設定にかかわらずレベルアップできません。
　CardWirthのデバグ宿ではレベルアップしないため、意図的にそういう仕様にしています。
　一旦解除(Ctrl+D)してリューンなどに入って帰ってくればレベルアップします。

●対応できていない不具合(Rebootと同じ)

* ダイアログの開閉に遅延が起こる
　→Windowsの再起動
* サウンドフォントが一つもチェックされていないと音が鳴らない
　→存在するサウンドフォントだけにチェックをつけて下さい(デフォルトならそのままでOK)
* NEXT形式シナリオを含むフォルダを開くのが遅い
　→NEXT形式シナリオ(表示されない＆ドロップしてエラー音がなるシナリオ)は
　　可能であればフォルダから除外するのを推奨します

--------------------------------------------------------------------------

●独自の追加要素/変更点
　変更は多岐にわたるのでプレイ上、重要なものを一部抜粋します。

ショートカットキーの強化
##########################################################################
　全般　　　　　戻る・閉じる(BACKSPACE//(BACKSLASH))/削除(DELETE)
　拠点選択　　　新規宿(CTRL+N)
　キャラ選択　　新規登録(CTRL+N)/自動登録(CTRL+A)
　カード操作　　ゴミ箱に送る(DELETE)
　シナリオ選択　インストール(CTRL+I)/新規フォルダ(CTRL+N)/移動(CTRL+M)/名前の変更(CTRL+R)

　編集・設定　移動(CTRL+↑↓)/最上下へ移動(CTRL+HOME/END)/削除(DELETE)
　(設定ダイアログのサウンドフォント、デバッグモードのクーポン・ゴシップ・終了印・ブックマーク編集ダイアログ)
##########################################################################

仕様再現の追加オプション
　そのまま再現すると別の問題が生じるなど、やむを得ないものにPyLite独自の互換オプションを設けています。

・フォント「カード名やタイトルを縁取りする」　CW準拠：無効
・シナリオ「CardWirth1.28由来のF9仕様を再現する」　CW準拠：有効※不具合が出るシナリオもあるので非推奨
・シナリオ「CardWirth1.50の変数=バグを再現する」　1.28：無効 / 1.50：有効(デフォルト)
・詳細「ホイールでカード選択と選択肢のフォーカス移動を行う」　CW準拠：無効

その他
Rebootにあり、Liteにない要素の詳細
https://www65.atwiki.jp/pylite/pages/24.html
Liteにあり、Rebootにない要素の詳細
https://www65.atwiki.jp/pylite/pages/18.html


--------------------------------------------------------------------------

●ライセンス
ソース及びアイコンはMITライセンス、PyLite.exe実行ファイルはGNU劣等一般公衆、CW由来の素材はgroupASKの規約に準じます。
各DLL及び著作権情報はlicense.txtを参照下さい。各ライセンスを満たす限り、再配布、再フォーク等は自由です。

